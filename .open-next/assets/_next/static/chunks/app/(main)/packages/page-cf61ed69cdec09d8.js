(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1581],{680:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var t=a(5155),r=a(2115),i=a(8482),l=a(7168),c=a(8145),d=a(9852),n=a(4616),m=a(4186),x=a(7108),h=a(9799),o=a(4516),p=a(7924),g=a(1482),u=a(2657);let j=(0,a(9946).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var v=a(5784),N=a(3580),y=a(513),f=a(6125),b=a(5529),k=a(8376);let w=e=>{switch(e){case"expected":default:return"bg-gray-100 text-gray-800";case"processing":return"bg-yellow-100 text-yellow-800";case"arrived":return"bg-orange-100 text-orange-800";case"in_transit":return"bg-green-100 text-green-800";case"delivered":return"bg-purple-100 text-purple-800"}};function A(){let[e,s]=(0,r.useState)(""),[a,A]=(0,r.useState)("all"),[_,C]=(0,r.useState)([]),[E,S]=(0,r.useState)({expected:0,arrived:0,in_transit:0,delivered:0}),[L,P]=(0,r.useState)(!0),{toast:T}=(0,N.dj)(),{trackPackage:z,trackError:q}=(0,y.s)(),{t:I}=(0,b.c)(),{language:M}=(0,k.o)(),R=e=>{switch(e){case"expected":return I("packages.statusLabels.expected","Attendu");case"processing":return I("packages.statusLabels.processing","En Traitement");case"arrived":return I("packages.statusLabels.arrived","Arriv\xe9");case"in_transit":return I("packages.statusLabels.in_transit","En Transit");case"delivered":return I("packages.statusLabels.delivered","Livr\xe9");default:return e.replace("_"," ")}},Z=async e=>{try{P(!0);let s=localStorage.getItem("authToken");if(!s){T({title:I("common.error","Erreur"),description:I("packages.errors.sessionExpired","Session expir\xe9e, veuillez vous reconnecter"),variant:"destructive"});return}let[a,t]=await Promise.all([fetch("/api/packages".concat(e&&"all"!==e?"?status=".concat(e):""),{headers:{Authorization:"Bearer ".concat(s)}}),fetch("/api/packages/stats",{headers:{Authorization:"Bearer ".concat(s)}})]);if(!a.ok||!t.ok)throw Error("Failed to fetch data");let r=await a.json(),i=await t.json();C(Array.isArray(r)?r:[]),S(i)}catch(e){q("API_ERROR",{error_message:e instanceof Error?e.message:"Unknown error",endpoint:"/api/packages"}),console.error("Error fetching data:",e),C([]),T({title:I("common.error","Erreur"),description:I("packages.errors.loadError","Impossible de charger les donn\xe9es"),variant:"destructive"})}finally{P(!1)}};(0,r.useEffect)(()=>{Z()},[T]),(0,r.useEffect)(()=>{L||(z("PACKAGE_FILTER",{filter_type:a}),Z(a))},[a]);let W=_.filter(s=>{var a;return s.id.toLowerCase().includes(e.toLowerCase())||(null===(a=s.tracking_number)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))}),B=e=>{s(e),e&&z("PACKAGE_SEARCH",{search_query:e})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"lg:hidden",children:[(0,t.jsx)("div",{className:"flex justify-end mb-2",children:(0,t.jsx)(l.$,{size:"sm",asChild:!0,className:"h-7 text-sm",children:(0,t.jsxs)("a",{href:"/packages/create",children:[(0,t.jsx)(n.A,{className:"w-3 h-3 mr-1"}),I("packages.addPackageButton","Ajouter Colis")]})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold",children:I("packages.title","Colis")}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:I("packages.subtitle","Suivez vos colis du Maroc vers la Turquie")})]})]}),(0,t.jsxs)("div",{className:"hidden lg:flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold",children:I("packages.title","Colis")}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:I("packages.subtitle","Suivez vos colis du Maroc vers la Turquie")})]}),(0,t.jsx)(l.$,{size:"sm",asChild:!0,className:"h-7 text-sm",children:(0,t.jsxs)("a",{href:"/packages/create",children:[(0,t.jsx)(n.A,{className:"w-3 h-3 mr-1"}),I("packages.addPackageButton","Ajouter Colis")]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(i.Zp,{className:"border-gray-200",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:I("packages.stats.expected","Attendu")}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:E.expected})]}),(0,t.jsx)("div",{className:"p-2 rounded-md bg-gray-100",children:(0,t.jsx)(m.A,{className:"w-4 h-4 text-gray-600"})})]})})}),(0,t.jsx)(i.Zp,{className:"border-gray-200",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:I("packages.stats.arrived","Arriv\xe9")}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:E.arrived})]}),(0,t.jsx)("div",{className:"p-2 rounded-md bg-orange-100",children:(0,t.jsx)(x.A,{className:"w-4 h-4 text-orange-600"})})]})})}),(0,t.jsx)(i.Zp,{className:"border-gray-200",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:I("packages.stats.inTransit","En Transit")}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:E.in_transit})]}),(0,t.jsx)("div",{className:"p-2 rounded-md bg-green-100",children:(0,t.jsx)(h.A,{className:"w-4 h-4 text-green-600"})})]})})}),(0,t.jsx)(i.Zp,{className:"border-gray-200",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:I("packages.stats.delivered","Livr\xe9")}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:E.delivered})]}),(0,t.jsx)("div",{className:"p-2 rounded-md bg-purple-100",children:(0,t.jsx)(o.A,{className:"w-4 h-4 text-purple-600"})})]})})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(p.A,{className:"absolute left-2 top-2 w-3 h-3 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:I("packages.searchPlaceholder","Rechercher des colis..."),value:e,onChange:e=>B(e.target.value),className:"pl-7 h-8 text-sm"})]}),(0,t.jsxs)(v.l6,{value:a,onValueChange:A,children:[(0,t.jsxs)(v.bq,{className:"w-40 h-8 text-sm",children:[(0,t.jsx)(g.A,{className:"w-3 h-3 mr-1"}),(0,t.jsx)(v.yv,{placeholder:I("packages.statusFilter","Statut")})]}),(0,t.jsxs)(v.gC,{children:[(0,t.jsx)(v.eb,{value:"all",className:"text-sm",children:I("packages.allStatuses","Tous les Statuts")}),(0,t.jsx)(v.eb,{value:"expected",className:"text-sm",children:I("packages.statusLabels.expected","Attendu")}),(0,t.jsx)(v.eb,{value:"arrived",className:"text-sm",children:I("packages.statusLabels.arrived","Arriv\xe9")}),(0,t.jsx)(v.eb,{value:"in_transit",className:"text-sm",children:I("packages.statusLabels.in_transit","En Transit")}),(0,t.jsx)(v.eb,{value:"delivered",className:"text-sm",children:I("packages.statusLabels.delivered","Livr\xe9")})]})]})]}),L?(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,t.jsx)(i.Zp,{className:"border-gray-200",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded"})]})]})})},e))}):0===W.length?(0,t.jsxs)(i.Zp,{className:"border-gray-200",children:[(0,t.jsxs)(i.aR,{className:"text-center pb-4",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"p-3 rounded-full bg-gray-100",children:(0,t.jsx)(x.A,{className:"w-8 h-8 text-gray-400"})})}),(0,t.jsx)(i.ZB,{className:"text-lg font-semibold text-gray-900",children:I("packages.emptyState.title","Aucun colis trouv\xe9")}),(0,t.jsx)(i.BT,{className:"text-sm text-gray-600",children:e||"all"!==a?I("packages.emptyState.description","Aucun colis ne correspond \xe0 vos crit\xe8res de recherche."):I("packages.emptyState.descriptionNoPackages","Vous n'avez pas encore de colis. Commencez par ajouter votre premier colis.")})]}),(0,t.jsx)(i.Wu,{className:"text-center pt-0",children:!e&&"all"===a&&(0,t.jsx)(l.$,{size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:"/packages/create",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 mr-2"}),I("packages.emptyState.addFirstPackage","Ajouter votre premier colis")]})})})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:W.map(e=>{var s,a;return(0,t.jsxs)(i.Zp,{className:"border-gray-200 hover:shadow-sm transition-shadow",children:[(0,t.jsx)(i.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsx)("div",{className:"space-y-1 min-w-0 flex-1",children:(0,t.jsx)(i.ZB,{className:"text-sm font-semibold",children:e.id})}),(0,t.jsx)(c.E,{className:w(e.status)+" text-xs",variant:"secondary",children:R(e.status)})]})}),(0,t.jsxs)(i.Wu,{className:"pt-0 space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.tracking","Tracking"),":"]}),(0,t.jsx)("span",{className:"font-mono text-sm",children:e.tracking_number||"N/A"})]}),e.carrier&&(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.carrier","Carrier"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.carrier})]}),e.eta&&(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.eta","ETA"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.eta})]}),e.weight&&(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.weight","Poids"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.weight})]}),e.dimensions&&(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.dimensions","Dimensions"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.dimensions})]}),(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.shippingCost","Shipping Cost"),":"]}),(0,t.jsx)("span",{className:e.shipping_cost?"font-semibold":"text-orange-600 font-medium",children:e.shipping_cost?(0,f.vv)(e.shipping_cost):I("packages.pending","Pending")})]}),e.insurance&&(0,t.jsxs)("div",{className:"flex justify-between py-0.5",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[I("packages.insurance","Assurance"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.vv)(e.insurance)})]})]}),void 0!==e.progress&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[I("packages.progress","Progress"),":"]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e.progress,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,t.jsx)("div",{className:"bg-orange-600 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium text-sm mb-2",children:[I("packages.items","Items")," (",(null===(s=e.items)||void 0===s?void 0:s.length)||0,")"]}),(0,t.jsxs)("div",{className:"space-y-1",children:[null===(a=e.items)||void 0===a?void 0:a.slice(0,2).map((e,s)=>(0,t.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full flex-shrink-0"}),e.name]},s)),e.items&&e.items.length>2&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full flex-shrink-0"}),"+",e.items.length-2," ",I("packages.additionalItems","additional items")]})]})]}),e.updated_at&&(0,t.jsxs)("div",{className:"text-sm text-gray-400 pt-1 border-t border-gray-100",children:[I("packages.lastUpdated","Last Updated"),": ",new Date(e.updated_at).toLocaleDateString("fr"===M?"fr-FR":"en-US",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(l.$,{variant:"outline",size:"sm",className:"flex-1 h-7 text-sm",asChild:!0,onClick:()=>z("VIEW_PACKAGE_DETAILS",{packageId:e.id}),children:(0,t.jsxs)("a",{href:"/packages/".concat(e.id),children:[(0,t.jsx)(u.A,{className:"w-3 h-3 mr-1"}),I("packages.viewDetails","View Details")]})}),"arrived"===e.status&&(0,t.jsxs)(l.$,{size:"sm",className:"flex-1 h-7 text-sm",onClick:()=>z("PACKAGE_STATUS_CHANGE",{packageId:e.id,status:"payment_requested"}),children:[(0,t.jsx)(j,{className:"w-3 h-3 mr-1"}),I("packages.payShipping","Pay Shipping")]})]})]})]},e.id)})})]})}},3999:(e,s,a)=>{"use strict";a.d(s,{cn:()=>i});var t=a(2596),r=a(9688);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},4516:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7001:(e,s,a)=>{Promise.resolve().then(a.bind(a,680))},7108:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},9799:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[8229,7598,8969,1072,6671,1142,1600,3094,8441,1684,7358],()=>s(7001)),_N_E=e.O()}]);