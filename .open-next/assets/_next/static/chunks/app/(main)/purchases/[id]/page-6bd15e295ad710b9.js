(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6778],{1217:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(5155),r=t(2115),n=t(5695),l=t(8482),i=t(7168),c=t(8145),d=t(2138),m=t(7550),u=t(7434),o=t(6308),h=t(7213),p=t(3786),x=t(3580),f=t(6125),j=t(5529),y=t(8376);let v=e=>{switch(e){case"pending_review":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-orange-100 text-orange-800";case"purchasing":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=(e,s)=>{switch(e){case"pending_review":return s("purchases.statusLabels.pending_review","En Attente de R\xe9vision");case"confirmed":return s("purchases.statusLabels.confirmed","Confirm\xe9");case"purchasing":return s("purchases.statusLabels.purchasing","Achat en Cours");case"completed":return s("purchases.statusLabels.completed","Termin\xe9");case"cancelled":return s("purchases.statusLabels.cancelled","Annul\xe9");default:return e.replace("_"," ")}};function N(e){let{params:s}=e,{id:t}=r.use(s),N=(0,n.useRouter)(),{toast:b}=(0,x.dj)(),{t:A}=(0,j.c)(),{isRTL:w}=(0,y.o)(),[_,k]=(0,r.useState)(null),[D,E]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/purchase-requests/".concat(t));if(e.ok){let s=await e.json();k(s)}else b({title:A("common.error","Erreur"),description:A("purchaseDetail.notFound","Demande d'achat introuvable"),variant:"destructive"})}catch(e){console.error("Error fetching purchase request:",e),b({title:A("common.error","Erreur"),description:A("purchaseDetail.loadError","Impossible de charger la demande d'achat"),variant:"destructive"})}finally{E(!1)}})()},[t,b,A]),D)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:A("purchaseDetail.loading","Chargement...")}):_?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>N.back(),className:"h-7 w-7 p-0",children:w?(0,a.jsx)(d.A,{className:"w-3 h-3"}):(0,a.jsx)(m.A,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:_.id}),(0,a.jsx)(c.E,{className:v(_.status)+" text-xs",variant:"secondary",children:g(_.status,A)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,a.jsxs)(l.Zp,{className:"border-gray-200",children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsx)(l.ZB,{className:"text-base font-semibold",children:A("purchaseDetail.summary.title","R\xe9sum\xe9 de la Demande")})}),(0,a.jsxs)(l.Wu,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[A("purchaseDetail.summary.itemsCost","Co\xfbt des Articles")," :"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:_.items_cost?(0,f.vv)(_.items_cost):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[A("purchaseDetail.summary.shippingFee","Frais d'Exp\xe9dition")," :"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:_.shipping_fee?(0,f.vv)(_.shipping_fee):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[A("purchaseDetail.summary.serviceFee","Frais de Service")," :"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:_.service_fee?(0,f.vv)(_.service_fee):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[A("purchaseDetail.summary.processingFee","Frais de Traitement")," :"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:_.processing_fee?(0,f.vv)(_.processing_fee):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[A("purchaseDetail.summary.taxes","Taxes")," :"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:_.taxes?(0,f.vv)(_.taxes):"N/A"})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[A("purchaseDetail.summary.totalAmount","Montant Total")," :"]}),(0,a.jsx)("span",{className:"text-lg font-bold text-orange-600",children:(0,f.vv)(_.payment_due||_.total_amount)})]})})]})]}),_.admin_notes&&(0,a.jsxs)(l.Zp,{className:"border-gray-200",children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsx)(l.ZB,{className:"text-base font-semibold",children:"Notes de l'Administrateur"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"p-3 bg-orange-50 rounded-md border border-orange-200",children:(0,a.jsx)("p",{className:"text-sm text-orange-800",children:_.admin_notes})})})]}),_.attachments&&_.attachments.length>0&&(0,a.jsxs)(l.Zp,{className:"border-gray-200",children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-base font-semibold",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),A("purchaseDetail.attachments.title","Documents")," (",_.attachments.length,")"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:_.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["receipt"===e.attachment_type?(0,a.jsx)(o.A,{className:"w-4 h-4 text-green-600"}):"photo"===e.attachment_type?(0,a.jsx)(h.A,{className:"w-4 h-4 text-blue-600"}):(0,a.jsx)(u.A,{className:"w-4 h-4 text-gray-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.file_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.file_size?"".concat((e.file_size/1024).toFixed(1)," ").concat(A("purchaseDetail.attachments.fileSize","KB")):"N/A"})]})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-sm",children:(0,a.jsxs)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(p.A,{className:"w-3 h-3 mr-1"}),A("purchaseDetail.attachments.view","Voir")]})})]},e.id))})})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(l.Zp,{className:"border-gray-200",children:(0,a.jsx)(l.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Informations"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Date de cr\xe9ation :"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,f.Yq)(_.date)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Derni\xe8re mise \xe0 jour :"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,f.Yq)(_.updated_at)})]})]})]})})})})]})]}):(0,a.jsx)("div",{children:A("purchaseDetail.notFound","Purchase request not found")})}},2085:(e,s,t)=>{"use strict";t.d(s,{F:()=>l});var a=t(2596);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,l=(e,s)=>t=>{var a;if((null==s?void 0:s.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:i}=s,c=Object.keys(l).map(e=>{let s=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===s)return null;let n=r(s)||r(a);return l[e][n]}),d=t&&Object.entries(t).reduce((e,s)=>{let[t,a]=s;return void 0===a||(e[t]=a),e},{});return n(e,c,null==s?void 0:null===(a=s.compoundVariants)||void 0===a?void 0:a.reduce((e,s)=>{let{class:t,className:a,...r}=s;return Object.entries(r).every(e=>{let[s,t]=e;return Array.isArray(t)?t.includes({...i,...d}[s]):({...i,...d})[s]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},2138:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3786:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3809:(e,s,t)=>{Promise.resolve().then(t.bind(t,1217))},3999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2596),r=t(9688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},6101:(e,s,t)=>{"use strict";t.d(s,{s:()=>l,t:()=>n});var a=t(2115);function r(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}function n(...e){return s=>{let t=!1,a=e.map(e=>{let a=r(e,s);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let s=0;s<a.length;s++){let t=a[s];"function"==typeof t?t():r(e[s],null)}}}}function l(...e){return a.useCallback(n(...e),e)}},6308:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},7213:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7434:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9708:(e,s,t)=>{"use strict";t.d(s,{DX:()=>l});var a=t(2115),r=t(6101),n=t(5155),l=a.forwardRef((e,s)=>{let{children:t,...r}=e,l=a.Children.toArray(t),c=l.find(d);if(c){let e=c.props.children,t=l.map(s=>s!==c?s:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(i,{...r,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,t):null})}return(0,n.jsx)(i,{...r,ref:s,children:t})});l.displayName="Slot";var i=a.forwardRef((e,s)=>{let{children:t,...n}=e;if(a.isValidElement(t)){let e=function(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=s&&"isReactWarning"in s&&s.isReactWarning;return t?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t);return a.cloneElement(t,{...function(e,s){let t={...s};for(let a in s){let r=e[a],n=s[a];/^on[A-Z]/.test(a)?r&&n?t[a]=(...e)=>{n(...e),r(...e)}:r&&(t[a]=r):"style"===a?t[a]={...r,...n}:"className"===a&&(t[a]=[r,n].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props),ref:s?(0,r.t)(s,e):e})}return a.Children.count(t)>1?a.Children.only(null):null});i.displayName="SlotClone";var c=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function d(e){return a.isValidElement(e)&&e.type===c}}},e=>{var s=s=>e(e.s=s);e.O(0,[7598,6671,1600,8441,1684,7358],()=>s(3809)),_N_E=e.O()}]);